{% extends "clients/base.html" %}

{% block title %}Invoices - Monoliet Portal{% endblock %}

{% block content %}
<div class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8 fade-in">
            <h1 class="font-primary text-4xl font-bold text-white mb-2">INVOICES</h1>
            <p class="font-secondary text-accent text-sm uppercase tracking-wider">Billing & Payment Records</p>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12 fade-in">
            <div class="stat-card">
                <div class="stat-label">Total Invoiced</div>
                <div class="stat-value">${{ total_amount|floatformat:2|default:"0.00" }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Paid</div>
                <div class="stat-value" style="color: #22C55E;">${{ paid_amount|floatformat:2|default:"0.00" }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Pending</div>
                <div class="stat-value" style="color: #FBBF24;">${{ pending_amount|floatformat:2|default:"0.00" }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Overdue</div>
                <div class="stat-value" style="color: #EF4444;">${{ overdue_amount|floatformat:2|default:"0.00" }}</div>
            </div>
        </div>

        <!-- Invoices Table -->
        <div class="glass-container fade-in">
            {% if invoices %}
            <table class="data-table">
                <thead>
                    <tr>
                        <th>INVOICE #</th>
                        <th>TYPE</th>
                        <th>AMOUNT</th>
                        <th>DUE DATE</th>
                        <th>STATUS</th>
                        <th>PAID DATE</th>
                    </tr>
                </thead>
                <tbody>
                    {% for invoice in invoices %}
                    <tr {% if invoice.is_overdue %}style="background: rgba(239, 68, 68, 0.05);"{% endif %}>
                        <td class="font-secondary font-bold">{{ invoice.invoice_number }}</td>
                        <td class="uppercase">{{ invoice.get_type_display }}</td>
                        <td class="font-secondary text-white font-semibold">${{ invoice.amount|floatformat:2 }}</td>
                        <td class="font-secondary text-accent">{{ invoice.due_date|date:"Y-m-d" }}</td>
                        <td>
                            {% if invoice.is_overdue %}
                            <span class="status-badge status-error">OVERDUE</span>
                            {% elif invoice.status == 'paid' %}
                            <span class="status-badge status-active">PAID</span>
                            {% else %}
                            <span class="status-badge status-pending">PENDING</span>
                            {% endif %}
                        </td>
                        <td class="font-secondary text-accent">
                            {% if invoice.paid_date %}
                            {{ invoice.paid_date|date:"Y-m-d" }}
                            {% else %}
                            -
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="text-center py-12">
                <p class="font-secondary text-accent">NO INVOICES FOUND</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
